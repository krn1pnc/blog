---
title: 梦熊 2024 省选十三连测 做题记录
date: 2023-11-28 16:36:58
categories: 做题记录
---

## 11 月 21 日

### A. 树上填数

经过猜猜猜，发现最终方案肯定形如选定重心为根，某些子树内从上到下升，另外的子树内从上到下降．

将这些子树塞进背包里，根据经典结论，不同的物品只有 $O(\sqrt{n})$ 种，直接优化背包后枚举多少上升多少下降即可通过．

### * B. 序列化树

首先先将序列排序，首先 $1$ 肯定需要作为某个节点的父亲，故直接将其拿出一个．

然后考虑逐个为 $2 \sim n$ 分配父亲．为了让权值和最大，我们肯定要选序列中尽量小的元素当作他们的父亲，也就是将排序后的 $a_2 \sim a_n$ 作为 $p_2 \sim p_n$．此时可能会出现矛盾：如果有 $a_i > i$，肯定没救了，故只需考虑 $a_i = i$ 的情况．此时我们只能将其塞进 $1$ 到 $n$ 的链中．设这样的位置有 $x$ 个，$k < x$ 的情况均无解，剩下的情况贪心选边权即可．

### ! C. 两岸的猿

还没补．

## 11 月 28 日

### A. 道路

假设我们已经对于所有点对 $(u, v)$ 预处理出了最短路 $d_{u, v}$．对于边 $(u, v, w)$，限制可以被表述为存在一个 $(p, q, t)$，使得 $\min\{d_{p, u} + w + d_{v, q}, d_{p, v} + w + d_{u, q}\} \le t$．

那个 $\min$ 可以不管，将点对翻转后再做一遍即可．考虑对于每条边 $(u, v, w)$，如何快速判断对于所有 $(p, q, t)$，有 $d_{p, u} + w + d_{v, q} \le t$．将限制变形后可以得到 $w \le t - d_{p, u} - d_{v, q}$．不妨预处理 $f_{p, v}$ 代表对于所有 $(p, q, t)$，$\max\{t - d_{v, q}\}$，这样在判断时枚举 $p$，判定 $\max\{f_{p, v} - d_{p, u}\} \ge w$ 即可．

时间复杂度 $O(n^3)$．

### B. 颁奖

不妨在点 $u$ 下面挂个虚点 $u^\prime$，$u$ 到 $u^\prime$ 的边权是 $a_u$．然后我们发现，最终的点一定是加虚点后图的直径的中点．线段树维护直径，然后倍增跳一下即可．

### ! C. 红石灯

还没补．
