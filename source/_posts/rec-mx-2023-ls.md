---
title: 梦熊 2023 炼石计划 做题记录
date: 2023-11-29 14:33:20
categories: 做题记录
---

## 11 月 23 日

### * A. 座号重分配

注意到

$$
a_i b_j+a_j b_k+a_k b_i \ge a_k b_j+a_j b_i+a_i b_k \iff (a_k - a_j)(b_i - b_j) - (a_i - a_j)(b_k - b_j) \ge 0
$$

故若令 $A_i = (a_i, b_i)$，那么有 $\overrightarrow{A_iA_{i + 1}} \times \overrightarrow{A_{i + 1}A_{i + 2}} \ge 0$，每次跑一次凸包，删去凸包上的点后解决子问题，然后枚举凸包上的点看如何拼接．

### * B. 实习生分配

唐．

不妨枚举 $a, b$ 的最大值 $p, q$，那么为了最小化部门 Y 的价值，$a_i \le p$ 且 $b_i \le q$ 的点全都发配到部门 X 一定不劣．按照 $p$ 降序扫描线，过程中对每个 $q$ 维护 $\max c_i + \max d_i + q$，修改形如全局取 $\max$，由于初始状态是通过前缀取 $\max$ 得到的，故事实上是区间覆盖．容易使用线段树维护，注意需要精细地保证 X 和 Y 部门都有人．

### ! C. 城镇分配

还没补．

## 11 月 26 日

### * A. 白云一片去悠悠

我们选取一个联通块中最小的且最靠左上方的元素作为这个连通块的特征元素，对联通块计数即对特征元素计数．

考虑一个元素 $(i, j)$ 何时能够成为特征元素．如果它往四个方向直走，只经过合法的格子，能够走到一个权值比自己小的格子，那么它肯定不是特征元素．现在我们尝试证明，从某个格子开始，若其上下左右四个方向上第一个权值比自己小的格子都无法通过直走到达，那么它就是一个特征元素．采用反证法，不妨设它能走到它上方的那个比自己小的格子，那么它需要绕过挡住自己的那个格子，不妨设路径是 $(i, j) \to (i, k) \to (p, k) \to (p, j)$，那么有 $b_k < b_j$，那么有 $a_i + b_k < a_i + b_j$，即 $w_{i, k} < w_{i, j}$，与四个方向上都走不到矛盾．

故设 $\mathrm{pa}_i$ 为最大的 $j$ 满足 $a_j < a_i$，$\mathrm{sa}_i$ 为最小的 $j$ 满足 $a_j < a_i$，$\mathrm{pb}_i, \mathrm{sb}_i$ 类似．那么就是求有多少点对 $(i, j)$ 满足

$$
\begin{aligned}
a_i + b_j \le x \\
a_i + \min\{\max_{k = \mathrm{pb}_j}^{j} b_k, \max_{k = j}^{\mathrm{sb}_j} b_k\} > x \\
b_j + \min\{\max_{k = \mathrm{pa}_i}^{i} a_k, \max_{k = i}^{\mathrm{sa}_i} a_k\} > x
\end{aligned}
$$

扫描线即可．

### * B. 模板性二维数点

假设我们设定了阈值 $x$，只考虑 $a_i^y < x, b_j^y > x$ 的情况，发现选取出的点对一定至少包含一个两边的最大值．考虑对 $y$ 轴分治，求出可能成为答案的点对，容易发现个数是 $O(n \log n)$．

然后扫描线即可．

### * C. 多刀流

分类讨论．

1. $m = n$ 时，只需判断整个串是否单调升，若不是则可行．
1. $m = 2$ 时，枚举分界点．
1. $m = 3$ 时，考虑是 $T_1 > T_2$ 还是 $T_2 > T_3$．

    1. $T_1 > T_2$ 时，可以被调整到 $|T_2| = 1$，直接枚举即可．
    1. $T_2 > T_3$ 时，考虑最终的划分方案：

        1. $T_2$ 中存在字符大于 $T3$ 中的字符，可以调整使得 $|T_2| = 1$．
        1. 剩下的情况，$T_2$ 中只包含一种字符，且最大化 $|T_2|$ 是最优的．

        于是直接枚举连续段作为 $T_2$ 即可．

1. $m \ge 4$ 时，只需找到一个位置 $i$ 使得 $s_i > s_{i + 1}$ 或 $s_i = s_{i + 1} = s_{i + 2}$ 即可．

## 11 月 30 日

### * A. 种豆南山

一种作物分布唯一对应一个最小的能够将所有有作物的格子框住的矩形，我们称这个矩形为这个分布的特征矩形．

考虑枚举矩形，计算特征矩形为当前矩形的分布个数．需要很麻烦的分讨．咕咕咕咕．

### ! B. 长城烽火

还没补．

### ! C. 光明教会

还没补．
